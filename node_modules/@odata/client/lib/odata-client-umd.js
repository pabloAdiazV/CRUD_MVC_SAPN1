(()=>{var ii=Object.create;var Zt=Object.defineProperty;var si=Object.getOwnPropertyDescriptor;var ai=Object.getOwnPropertyNames;var oi=Object.getPrototypeOf,ui=Object.prototype.hasOwnProperty;var u=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ci=(r,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ai(e))!ui.call(r,s)&&s!==n&&Zt(r,s,{get:()=>e[s],enumerable:!(i=si(e,s))||i.enumerable});return r};var m=(r,e,n)=>(n=r!=null?ii(oi(r)):{},ci(e||!r||!r.__esModule?Zt(n,"default",{value:r,enumerable:!0}):n,r));var Xt=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var ee=(r,e,n)=>(Xt(r,e,"read from private field"),n?n.call(r):e.get(r)),Fe=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)},Ne=(r,e,n,i)=>(Xt(r,e,"write to private field"),i?i.call(r,n):e.set(r,n),n);var ct=u(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.isFunction=void 0;function er(r){return typeof r=="function"}te.isFunction=er;te.default=er});var rr=u(S=>{"use strict";var li=S&&S.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(S,"__esModule",{value:!0});S.isAsyncFunction=void 0;var pi=li(ct());function tr(r){return(0,pi.default)(r)?r[Symbol.toStringTag]==="AsyncFunction":!1}S.isAsyncFunction=tr;S.default=tr});var nr=u(o=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.HALF_MAX_ARRAY_LENGTH=o.MAX_ARRAY_INDEX=o.MAX_ARRAY_LENGTH=o.NAN=o.MAX_INTEGER=o.MAX_SAFE_INTEGER=o.INFINITY=o.LAZY_WHILE_FLAG=o.LAZY_MAP_FLAG=o.LAZY_FILTER_FLAG=o.HOT_SPAN=o.HOT_COUNT=o.DEFAULT_TRUNC_OMISSION=o.DEFAULT_TRUNC_LENGTH=o.WRAP_FLIP_FLAG=o.WRAP_REARG_FLAG=o.WRAP_ARY_FLAG=o.WRAP_PARTIAL_RIGHT_FLAG=o.WRAP_PARTIAL_FLAG=o.WRAP_CURRY_RIGHT_FLAG=o.WRAP_CURRY_FLAG=o.WRAP_CURRY_BOUND_FLAG=o.WRAP_BIND_KEY_FLAG=o.WRAP_BIND_FLAG=o.COMPARE_UNORDERED_FLAG=o.COMPARE_PARTIAL_FLAG=o.CLONE_SYMBOLS_FLAG=o.CLONE_FLAT_FLAG=o.CLONE_DEEP_FLAG=o.PLACEHOLDER=o.MAX_MEMOIZE_SIZE=o.HASH_UNDEFINED=o.FUNC_ERROR_TEXT=o.CORE_ERROR_TEXT=o.LARGE_ARRAY_SIZE=void 0;o.LARGE_ARRAY_SIZE=200;o.CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";o.FUNC_ERROR_TEXT="Expected a function";o.HASH_UNDEFINED="__lodash_hash_undefined__";o.MAX_MEMOIZE_SIZE=500;o.PLACEHOLDER="__lodash_placeholder__";o.CLONE_DEEP_FLAG=1;o.CLONE_FLAT_FLAG=2;o.CLONE_SYMBOLS_FLAG=4;o.COMPARE_PARTIAL_FLAG=1;o.COMPARE_UNORDERED_FLAG=2;o.WRAP_BIND_FLAG=1;o.WRAP_BIND_KEY_FLAG=2;o.WRAP_CURRY_BOUND_FLAG=4;o.WRAP_CURRY_FLAG=8;o.WRAP_CURRY_RIGHT_FLAG=16;o.WRAP_PARTIAL_FLAG=32;o.WRAP_PARTIAL_RIGHT_FLAG=64;o.WRAP_ARY_FLAG=128;o.WRAP_REARG_FLAG=256;o.WRAP_FLIP_FLAG=512;o.DEFAULT_TRUNC_LENGTH=30;o.DEFAULT_TRUNC_OMISSION="...";o.HOT_COUNT=800;o.HOT_SPAN=16;o.LAZY_FILTER_FLAG=1;o.LAZY_MAP_FLAG=2;o.LAZY_WHILE_FLAG=3;o.INFINITY=1/0;o.MAX_SAFE_INTEGER=9007199254740991;o.MAX_INTEGER=17976931348623157e292;o.NAN=0/0;o.MAX_ARRAY_LENGTH=4294967295;o.MAX_ARRAY_INDEX=o.MAX_ARRAY_LENGTH-1;o.HALF_MAX_ARRAY_LENGTH=o.MAX_ARRAY_LENGTH>>>1});var ir=u(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var fi=pt();function di(r){if(r!=null){try{return fi.funcToString.call(r)}catch{}try{return r+""}catch{}}return""}lt.default=di});var sr=u(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});function hi(r,e){return function(n){return r(e(n))}}ft.default=hi});var pt=u((t,ne)=>{"use strict";var ar=t&&t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t,"__esModule",{value:!0});t.reTrim=t.reHasRegExpChar=t.reRegExpChar=t.rePropName=t.reIsPlainProp=t.reIsDeepProp=t.reInterpolate=t.reEvaluate=t.reEscape=t.reHasUnescapedHtml=t.reHasEscapedHtml=t.reUnescapedHtml=t.reEscapedHtml=t.reEmptyStringTrailing=t.reEmptyStringMiddle=t.reEmptyStringLeading=t.uint32Tag=t.uint16Tag=t.uint8ClampedTag=t.uint8Tag=t.int32Tag=t.int16Tag=t.int8Tag=t.float64Tag=t.float32Tag=t.dataViewTag=t.arrayBufferTag=t.weakSetTag=t.weakMapTag=t.undefinedTag=t.symbolTag=t.stringTag=t.setTag=t.regexpTag=t.proxyTag=t.promiseTag=t.objectTag=t.nullTag=t.numberTag=t.mapTag=t.genTag=t.funcTag=t.errorTag=t.domExcTag=t.dateTag=t.boolTag=t.asyncTag=t.arrayTag=t.argsTag=t.wrapFlags=void 0;t.rsOptContrUpper=t.rsOptContrLower=t.rsMiscUpper=t.rsMiscLower=t.rsZWJ=t.rsUpper=t.rsSurrPair=t.rsRegional=t.rsNonAstral=t.rsModifier=t.rsFitz=t.rsMisc=t.rsLower=t.rsDingbat=t.rsDigits=t.rsCombo=t.rsBreak=t.rsAstral=t.rsApos=t.rsBreakRange=t.rsVarRange=t.rsUpperRange=t.rsSpaceRange=t.rsPunctuationRange=t.rsNonCharRange=t.rsMathOpRange=t.rsLowerRange=t.rsDingbatRange=t.rsComboRange=t.rsComboSymbolsRange=t.reComboHalfMarksRange=t.rsComboMarksRange=t.rsAstralRange=t.reUnescapedString=t.reNoMatch=t.reLatin=t.reIsUint=t.reIsOctal=t.reIsHostCtor=t.reIsBinary=t.reIsBadHex=t.reFlags=t.reEsTemplate=t.reEscapeChar=t.reAsciiWord=t.reSplitDetails=t.reWrapDetails=t.reWrapComment=t.reTrimEnd=t.reTrimStart=void 0;t.objectCreate=t.getPrototype=t.allocUnsafe=t.objectCtorString=t.nativeObjectToString=t.maskSrcKey=t.idCounter=t.hasOwnProperty=t.funcToString=t.objectProto=t.funcProto=t.arrayProto=t.nodeIsTypedArray=t.nodeIsSet=t.nodeIsRegExp=t.nodeIsMap=t.nodeIsDate=t.nodeIsArrayBuffer=t.nodeUtil=t.freeProcess=t.moduleExports=t.freeModule=t.freeExports=t.root=t.freeSelf=t.freeGlobal=t.freeParseInt=t.freeParseFloat=t.stringEscapes=t.htmlUnescapes=t.htmlEscapes=t.deburredLetters=t.cloneableTags=t.typedArrayTags=t.templateCounter=t.contextProps=t.reHasUnicodeWord=t.reHasUnicode=t.reUnicodeWord=t.reUnicode=t.reComboMark=t.reApos=t.rsSymbol=t.rsEmoji=t.rsSeq=t.rsOrdUpper=t.rsOrdLower=t.rsOptJoin=t.rsOptVar=t.reOptMod=void 0;t.symbolToString=t.symbolValueOf=t.symbolProto=t.weakMapCtorString=t.setCtorString=t.promiseCtorString=t.mapCtorString=t.dataViewCtorString=t.realNames=t.metaMap=t.nativeCreate=t.nativeReverse=t.nativeRandom=t.nativeParseInt=t.nativeNow=t.nativeMin=t.nativeMax=t.nativeKeys=t.nativeJoin=t.nativeIsFinite=t.nativeIsBuffer=t.nativeGetSymbols=t.nativeFloor=t.nativeCeil=t.ctxSetTimeout=t.ctxNow=t.ctxClearTimeout=t.defineProperty=t.symToStringTag=t.symIterator=t.spreadableSymbol=t.splice=t.propertyIsEnumerable=void 0;var x=nr(),re=ar(ir()),or=ar(sr());t.wrapFlags=[["ary",x.WRAP_ARY_FLAG],["bind",x.WRAP_BIND_FLAG],["bindKey",x.WRAP_BIND_KEY_FLAG],["curry",x.WRAP_CURRY_FLAG],["curryRight",x.WRAP_CURRY_RIGHT_FLAG],["flip",x.WRAP_FLIP_FLAG],["partial",x.WRAP_PARTIAL_FLAG],["partialRight",x.WRAP_PARTIAL_RIGHT_FLAG],["rearg",x.WRAP_REARG_FLAG]];t.argsTag="[object Arguments]",t.arrayTag="[object Array]",t.asyncTag="[object AsyncFunction]",t.boolTag="[object Boolean]",t.dateTag="[object Date]",t.domExcTag="[object DOMException]",t.errorTag="[object Error]",t.funcTag="[object Function]",t.genTag="[object GeneratorFunction]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.nullTag="[object Null]",t.objectTag="[object Object]",t.promiseTag="[object Promise]",t.proxyTag="[object Proxy]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.undefinedTag="[object Undefined]",t.weakMapTag="[object WeakMap]",t.weakSetTag="[object WeakSet]";t.arrayBufferTag="[object ArrayBuffer]",t.dataViewTag="[object DataView]",t.float32Tag="[object Float32Array]",t.float64Tag="[object Float64Array]",t.int8Tag="[object Int8Array]",t.int16Tag="[object Int16Array]",t.int32Tag="[object Int32Array]",t.uint8Tag="[object Uint8Array]",t.uint8ClampedTag="[object Uint8ClampedArray]",t.uint16Tag="[object Uint16Array]",t.uint32Tag="[object Uint32Array]";t.reEmptyStringLeading=/\b__p \+= '';/g,t.reEmptyStringMiddle=/\b(__p \+=) '' \+/g,t.reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;t.reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,t.reUnescapedHtml=/[&<>"']/g,t.reHasEscapedHtml=RegExp(t.reEscapedHtml.source),t.reHasUnescapedHtml=RegExp(t.reUnescapedHtml.source);t.reEscape=/<%-([\s\S]+?)%>/g,t.reEvaluate=/<%([\s\S]+?)%>/g,t.reInterpolate=/<%=([\s\S]+?)%>/g;t.reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t.reIsPlainProp=/^\w*$/,t.rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;t.reRegExpChar=/[\\^$.*+?()[\]{}|]/g,t.reHasRegExpChar=RegExp(t.reRegExpChar.source);t.reTrim=/^\s+|\s+$/g,t.reTrimStart=/^\s+/,t.reTrimEnd=/\s+$/;t.reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,t.reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,t.reSplitDetails=/,? & /;t.reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.reEscapeChar=/\\(\\)?/g;t.reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;t.reFlags=/\w*$/;t.reIsBadHex=/^[-+]0x[0-9a-f]+$/i;t.reIsBinary=/^0b[01]+$/i;t.reIsHostCtor=/^\[object .+?Constructor\]$/;t.reIsOctal=/^0o[0-7]+$/i;t.reIsUint=/^(?:0|[1-9]\d*)$/;t.reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;t.reNoMatch=/($^)/;t.reUnescapedString=/['\n\r\u2028\u2029\\]/g;t.rsAstralRange="\\ud800-\\udfff",t.rsComboMarksRange="\\u0300-\\u036f",t.reComboHalfMarksRange="\\ufe20-\\ufe2f",t.rsComboSymbolsRange="\\u20d0-\\u20ff",t.rsComboRange=t.rsComboMarksRange+t.reComboHalfMarksRange+t.rsComboSymbolsRange,t.rsDingbatRange="\\u2700-\\u27bf",t.rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",t.rsMathOpRange="\\xac\\xb1\\xd7\\xf7",t.rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",t.rsPunctuationRange="\\u2000-\\u206f",t.rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",t.rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",t.rsVarRange="\\ufe0e\\ufe0f",t.rsBreakRange=t.rsMathOpRange+t.rsNonCharRange+t.rsPunctuationRange+t.rsSpaceRange;t.rsApos="['\u2019]",t.rsAstral="["+t.rsAstralRange+"]",t.rsBreak="["+t.rsBreakRange+"]",t.rsCombo="["+t.rsComboRange+"]",t.rsDigits="\\d+",t.rsDingbat="["+t.rsDingbatRange+"]",t.rsLower="["+t.rsLowerRange+"]",t.rsMisc="[^"+t.rsAstralRange+t.rsBreakRange+t.rsDigits+t.rsDingbatRange+t.rsLowerRange+t.rsUpperRange+"]",t.rsFitz="\\ud83c[\\udffb-\\udfff]",t.rsModifier="(?:"+t.rsCombo+"|"+t.rsFitz+")",t.rsNonAstral="[^"+t.rsAstralRange+"]",t.rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",t.rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",t.rsUpper="["+t.rsUpperRange+"]",t.rsZWJ="\\u200d";t.rsMiscLower="(?:"+t.rsLower+"|"+t.rsMisc+")",t.rsMiscUpper="(?:"+t.rsUpper+"|"+t.rsMisc+")",t.rsOptContrLower="(?:"+t.rsApos+"(?:d|ll|m|re|s|t|ve))?",t.rsOptContrUpper="(?:"+t.rsApos+"(?:D|LL|M|RE|S|T|VE))?",t.reOptMod=t.rsModifier+"?",t.rsOptVar="["+t.rsVarRange+"]?",t.rsOptJoin="(?:"+t.rsZWJ+"(?:"+[t.rsNonAstral,t.rsRegional,t.rsSurrPair].join("|")+")"+t.rsOptVar+t.reOptMod+")*",t.rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",t.rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",t.rsSeq=t.rsOptVar+t.reOptMod+t.rsOptJoin,t.rsEmoji="(?:"+[t.rsDingbat,t.rsRegional,t.rsSurrPair].join("|")+")"+t.rsSeq,t.rsSymbol="(?:"+[t.rsNonAstral+t.rsCombo+"?",t.rsCombo,t.rsRegional,t.rsSurrPair,t.rsAstral].join("|")+")";t.reApos=RegExp(t.rsApos,"g");t.reComboMark=RegExp(t.rsCombo,"g");t.reUnicode=RegExp(t.rsFitz+"(?="+t.rsFitz+")|"+t.rsSymbol+t.rsSeq,"g");t.reUnicodeWord=RegExp([t.rsUpper+"?"+t.rsLower+"+"+t.rsOptContrLower+"(?="+[t.rsBreak,t.rsUpper,"$"].join("|")+")",t.rsMiscUpper+"+"+t.rsOptContrUpper+"(?="+[t.rsBreak,t.rsUpper+t.rsMiscLower,"$"].join("|")+")",t.rsUpper+"?"+t.rsMiscLower+"+"+t.rsOptContrLower,t.rsUpper+"+"+t.rsOptContrUpper,t.rsOrdUpper,t.rsOrdLower,t.rsDigits,t.rsEmoji].join("|"),"g");t.reHasUnicode=RegExp("["+t.rsZWJ+t.rsAstralRange+t.rsComboRange+t.rsVarRange+"]");t.reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];t.templateCounter=-1;t.typedArrayTags={};t.typedArrayTags[t.float32Tag]=t.typedArrayTags[t.float64Tag]=t.typedArrayTags[t.int8Tag]=t.typedArrayTags[t.int16Tag]=t.typedArrayTags[t.int32Tag]=t.typedArrayTags[t.uint8Tag]=t.typedArrayTags[t.uint8ClampedTag]=t.typedArrayTags[t.uint16Tag]=t.typedArrayTags[t.uint32Tag]=!0;t.typedArrayTags[t.argsTag]=t.typedArrayTags[t.arrayTag]=t.typedArrayTags[t.arrayBufferTag]=t.typedArrayTags[t.boolTag]=t.typedArrayTags[t.dataViewTag]=t.typedArrayTags[t.dateTag]=t.typedArrayTags[t.errorTag]=t.typedArrayTags[t.funcTag]=t.typedArrayTags[t.mapTag]=t.typedArrayTags[t.numberTag]=t.typedArrayTags[t.objectTag]=t.typedArrayTags[t.regexpTag]=t.typedArrayTags[t.setTag]=t.typedArrayTags[t.stringTag]=t.typedArrayTags[t.weakMapTag]=!1;t.cloneableTags={};t.cloneableTags[t.argsTag]=t.cloneableTags[t.arrayTag]=t.cloneableTags[t.arrayBufferTag]=t.cloneableTags[t.dataViewTag]=t.cloneableTags[t.boolTag]=t.cloneableTags[t.dateTag]=t.cloneableTags[t.float32Tag]=t.cloneableTags[t.float64Tag]=t.cloneableTags[t.int8Tag]=t.cloneableTags[t.int16Tag]=t.cloneableTags[t.int32Tag]=t.cloneableTags[t.mapTag]=t.cloneableTags[t.numberTag]=t.cloneableTags[t.objectTag]=t.cloneableTags[t.regexpTag]=t.cloneableTags[t.setTag]=t.cloneableTags[t.stringTag]=t.cloneableTags[t.symbolTag]=t.cloneableTags[t.uint8Tag]=t.cloneableTags[t.uint8ClampedTag]=t.cloneableTags[t.uint16Tag]=t.cloneableTags[t.uint32Tag]=!0;t.cloneableTags[t.errorTag]=t.cloneableTags[t.funcTag]=t.cloneableTags[t.weakMapTag]=!1;t.deburredLetters={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"};t.htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t.htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};t.stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.freeParseFloat=parseFloat,t.freeParseInt=parseInt;t.freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;t.freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;t.root=t.freeGlobal||t.freeSelf||Function("return this")();t.freeExports=typeof t=="object"&&t&&!t.nodeType&&t;t.freeModule=t.freeExports&&typeof ne=="object"&&ne&&!ne.nodeType&&ne;t.moduleExports=t.freeModule&&t.freeModule.exports===t.freeExports;t.freeProcess=t.moduleExports&&t.freeGlobal.process;t.nodeUtil=function(){try{var r=t.freeModule&&t.freeModule.require&&t.freeModule.require("util").types;return r||t.freeProcess&&t.freeProcess.binding&&t.freeProcess.binding("util")}catch{}}();t.nodeIsArrayBuffer=t.nodeUtil&&t.nodeUtil.isArrayBuffer,t.nodeIsDate=t.nodeUtil&&t.nodeUtil.isDate,t.nodeIsMap=t.nodeUtil&&t.nodeUtil.isMap,t.nodeIsRegExp=t.nodeUtil&&t.nodeUtil.isRegExp,t.nodeIsSet=t.nodeUtil&&t.nodeUtil.isSet,t.nodeIsTypedArray=t.nodeUtil&&t.nodeUtil.isTypedArray;t.arrayProto=Array.prototype,t.funcProto=Function.prototype,t.objectProto=Object.prototype;t.funcToString=t.funcProto.toString;t.hasOwnProperty=t.objectProto.hasOwnProperty;t.idCounter=0;t.maskSrcKey="";t.nativeObjectToString=t.objectProto.toString;t.objectCtorString=t.funcToString.call(Object);t.allocUnsafe=typeof Buffer=="object"?Buffer.allocUnsafe:void 0,t.getPrototype=(0,or.default)(Object.getPrototypeOf,Object),t.objectCreate=Object.create,t.propertyIsEnumerable=t.objectProto.propertyIsEnumerable,t.splice=t.arrayProto.splice,t.spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0,t.symIterator=Symbol?Symbol.iterator:void 0,t.symToStringTag=Symbol?Symbol.toStringTag:void 0;t.defineProperty=Object.defineProperty;t.ctxClearTimeout=clearTimeout;t.ctxNow=Date.now;t.ctxSetTimeout=setTimeout;t.nativeCeil=Math.ceil,t.nativeFloor=Math.floor,t.nativeGetSymbols=Object.getOwnPropertySymbols,t.nativeIsBuffer=typeof Buffer=="object"?Buffer.isBuffer:void 0,t.nativeIsFinite=isFinite,t.nativeJoin=t.arrayProto.join,t.nativeKeys=(0,or.default)(Object.keys,Object),t.nativeMax=Math.max,t.nativeMin=Math.min,t.nativeNow=Date.now,t.nativeParseInt=parseInt,t.nativeRandom=Math.random,t.nativeReverse=t.arrayProto.reverse;t.nativeCreate=Object.create;t.metaMap=WeakMap&&new WeakMap;t.realNames={};t.dataViewCtorString=(0,re.default)(DataView),t.mapCtorString=(0,re.default)(Map),t.promiseCtorString=(0,re.default)(Promise),t.setCtorString=(0,re.default)(Set),t.weakMapCtorString=(0,re.default)(WeakMap);t.symbolProto=Symbol?Symbol.prototype:void 0,t.symbolValueOf=t.symbolProto?t.symbolProto.valueOf:void 0,t.symbolToString=t.symbolProto?t.symbolProto.toString:void 0});var Y=u(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.getTag=void 0;var $e=pt(),gi="[object Null]",mi="[object Undefined]";function yi(r){var e=Object.prototype.hasOwnProperty.call(r,Symbol.toStringTag);let n=r[Symbol.toStringTag];try{r[Symbol.toStringTag]=void 0;var i=!0}catch{}var s=Object.prototype.toString.call(r);return i&&(e?r[$e.symToStringTag]=n:delete r[$e.symToStringTag]),s}function ur(r){return r==null?r===void 0?mi:gi:$e.symToStringTag&&$e.symToStringTag in Object(r)?yi(r):Object.prototype.toString.call(r)}ie.getTag=ur;ie.default=ur});var J=u(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.isObjectLike=void 0;function cr(r){return r!=null&&typeof r=="object"}se.isObjectLike=cr;se.default=cr});var fr=u(E=>{"use strict";var lr=E&&E.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(E,"__esModule",{value:!0});E.isDate=void 0;var _i=lr(Y()),Ti=lr(J());function pr(r){return(0,Ti.default)(r)&&(0,_i.default)(r)=="[object Date]"}E.isDate=pr;E.default=pr});var hr=u(D=>{"use strict";var dr=D&&D.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(D,"__esModule",{value:!0});D.mustProvideN=D.mustProvide=void 0;var bi=dr(rr()),Oi=dr(fr());function Ri(r,e,n){if(r==null||typeof r!==n)throw new TypeError(`must provide '${e}' value with type '${n}', given: '${r}'/'${n}'`)}D.mustProvide=Ri;function Pi(r,e,n){if(r==null||n==="async_function"&&!(0,bi.default)(r)||n==="date"&&!(0,Oi.default)(r))throw new TypeError(`must provide '${e}' value with type '${n}', given: '${r}'/'${typeof r}'`)}D.mustProvideN=Pi});var gr=u(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.Semaphore=void 0;var ae=hr(),Ce=class{constructor(e,n=-1){this.tasks=[],this.defaultAcquireTimeout=-1,(0,ae.mustProvide)(e,"count","number"),this.count=e,this.defaultAcquireTimeout=n}_schedule(){if(this.count>0&&this.tasks.length>0){this.count--;let e=this.tasks.shift();(0,ae.mustProvide)(e,"task","function"),e()}}acquire(e=this.defaultAcquireTimeout){return(0,ae.mustProvide)(e,"timeout","number"),new Promise((n,i)=>{let s=()=>{s.hasTimeout?(this.count++,this._schedule()):(s.hasAcquired=!0,n(()=>{s.hasReleased||(s.hasReleased=!0,this.count++,this._schedule())}))};s.hasTimeout=!1,s.hasReleased=!1,s.hasAcquired=!1,this.tasks.push(s),setTimeout(()=>this._schedule(),0),typeof e=="number"&&e>0&&!isNaN(e)&&isFinite(e)&&setTimeout(()=>{s.hasAcquired||(s.hasTimeout=!0,i(new Error(`semaphore acquire timeout: ${e}`)))},e)})}async use(e,n=this.defaultAcquireTimeout){return(0,ae.mustProvide)(e,"f","function"),(0,ae.mustProvide)(n,"timeout","number"),this.acquire(n).then(i=>{let s=e();return(s==null?void 0:s.then)!==void 0&&typeof(s==null?void 0:s.then)=="function"?s.finally(i):(i(),s)})}};oe.Semaphore=Ce;oe.default=Ce});var dt=u(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.Mutex=void 0;var xi=gr(),Le=class extends xi.Semaphore{constructor(e=-1){super(1,e)}};ue.Mutex=Le;ue.default=Le});var Tr=u(q=>{"use strict";var yr=q&&q.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(q,"__esModule",{value:!0});q.isArguments=void 0;var Si=yr(Y()),Ei=yr(J());function _r(r){return(0,Ei.default)(r)&&(0,Si.default)(r)=="[object Arguments]"}q.isArguments=_r;q.default=_r});var br=u(le=>{"use strict";var qi=le&&le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(le,"__esModule",{value:!0});var vi=qi(Tr()),Mi=Symbol.isConcatSpreadable;function Ii(r){return Array.isArray(r)||(0,vi.default)(r)||!!(r&&r[Mi])}le.default=Ii});var yt=u(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});function ji(r,e){for(var n=-1,i=e.length,s=r.length;++n<i;)r[s+n]=e[n];return r}mt.default=ji});var _t=u(pe=>{"use strict";var Or=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pe,"__esModule",{value:!0});var Fi=Or(br()),Ni=Or(yt());function Rr(r,e,n,i,s){var a=-1,c=r.length;for(n||(n=Fi.default),s||(s=[]);++a<c;){var l=r[a];e>0&&n(l)?e>1?Rr(l,e-1,n,i,s):(0,Ni.default)(s,l):i||(s[s.length]=l)}return s}pe.default=Rr});var Pr=u(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});function $i(r,e){let n=-1,i=r.length;for(e||(e=new Array(i));++n<i;)e[n]=r[n];return e}Tt.default=$i});var Ue=u(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.isArray=void 0;function xr(r){return Array.isArray(r)}fe.isArray=xr;fe.default=xr});var bt=u(v=>{"use strict";var Ve=v&&v.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(v,"__esModule",{value:!0});v.concat=void 0;var Ci=Ve(_t()),Li=Ve(Pr()),ki=Ve(yt()),Ui=Ve(Ue());function Ar(...r){let e=r.length;if(!e)return[];let n=Array(e-1),i=r[0],s=e;for(;s--;)n[s-1]=r[s];return(0,ki.default)((0,Ui.default)(i)?(0,Li.default)(i):[i],(0,Ci.default)(n,1))}v.concat=Ar;v.default=Ar});var wr=u(M=>{"use strict";var Vi=M&&M.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(M,"__esModule",{value:!0});M.flatten=void 0;var Bi=Vi(_t());function Dr(r){return(r==null?0:r.length)?(0,Bi.default)(r,1):[]}M.flatten=Dr;M.default=Dr});var Be=u(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.join=void 0;var Gi=Array.prototype.join;function Sr(r,e=","){return r==null?"":Gi.call(r,e)}de.join=Sr;de.default=Sr});var qr=u(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.eq=void 0;function Er(r,e){return r===e||r!==r&&e!==e}he.eq=Er;he.default=Er});var Mr=u(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.isLength=void 0;var Hi=Number.MAX_SAFE_INTEGER||9007199254740991;function vr(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Hi}ge.isLength=vr;ge.default=vr});var Fr=u(I=>{"use strict";var Ir=I&&I.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(I,"__esModule",{value:!0});I.isArrayLike=void 0;var Wi=Ir(ct()),Yi=Ir(Mr());function jr(r){return r!=null&&(0,Yi.default)(r.length)&&!(0,Wi.default)(r)}I.isArrayLike=jr;I.default=jr});var Ot=u(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.isObject=void 0;function Nr(r){let e=typeof r;return r!=null&&(e==="object"||e==="function")}me.isObject=Nr;me.default=Nr});var $r=u(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var Ji=Number.MAX_SAFE_INTEGER||9007199254740991,Ki=/^(?:0|[1-9]\d*)$/;function zi(r,e){let n=typeof r;return e=e??Ji,!!e&&(n==="number"||n!=="symbol"&&Ki.test(r))&&r>-1&&r%1==0&&r<e}Rt.default=zi});var Lr=u(j=>{"use strict";var Ge=j&&j.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(j,"__esModule",{value:!0});j.isIterateeCall=void 0;var Qi=Ge(qr()),Zi=Ge(Fr()),Xi=Ge(Ot()),es=Ge($r());function Cr(r,e,n){if(!(0,Xi.default)(n))return!1;let i=typeof e;return(i==="number"?(0,Zi.default)(n)&&(0,es.default)(e,n.length):i==="string"&&e in n)?(0,Qi.default)(n[e],r):!1}j.isIterateeCall=Cr;j.default=Cr});var Ur=u(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.baseSlice=void 0;function kr(r,e,n){let i=-1,s=r.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;let a=Array(s);for(;++i<s;)a[i]=r[i+e];return a}ye.baseSlice=kr;ye.default=kr});var He=u(F=>{"use strict";var Vr=F&&F.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(F,"__esModule",{value:!0});F.isSymbol=void 0;var ts=Vr(Y()),rs=Vr(J()),ns="[object Symbol]";function Br(r){return typeof r=="symbol"||(0,rs.default)(r)&&(0,ts.default)(r)==ns}F.isSymbol=Br;F.default=Br});var Yr=u(N=>{"use strict";var Hr=N&&N.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(N,"__esModule",{value:!0});N.toNumber=void 0;var Gr=Hr(Ot()),is=Hr(He()),ss=/^[-+]0x[0-9a-f]+$/i,as=/^0b[01]+$/i,os=/^0o[0-7]+$/i,us=parseInt;function Wr(r){if(typeof r=="number")return r;if((0,is.default)(r))return Number.NaN;if((0,Gr.default)(r)){let n=typeof r.valueOf=="function"?r.valueOf():r;r=(0,Gr.default)(n)?`${n}`:n}if(typeof r!="string")return r===0?r:+r;r=r.trim();let e=as.test(r);return e||os.test(r)?us(r.slice(2),e?2:8):ss.test(r)?Number.NaN:+r}N.toNumber=Wr;N.default=Wr});var Kr=u(_e=>{"use strict";var cs=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});var ls=cs(Yr()),Jr=1/0,ps=Number.MAX_VALUE||17976931348623157e292;function fs(r){return r?(r=(0,ls.default)(r),r===Jr||r===-Jr?(r<0?-1:1)*ps:r===r?r:0):r===0?r:0}_e.default=fs});var Pt=u($=>{"use strict";var ds=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($,"__esModule",{value:!0});$.toInteger=void 0;var hs=ds(Kr());function zr(r){let e=(0,hs.default)(r),n=e%1;return e===e?n?e-n:e:0}$.toInteger=zr;$.default=zr});var Xr=u(C=>{"use strict";var xt=C&&C.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(C,"__esModule",{value:!0});C.slice=void 0;var gs=xt(Lr()),ms=xt(Ur()),Qr=xt(Pt());function Zr(r,e,n){let i=r==null?0:r.length;return i?(n&&typeof n!="number"&&(0,gs.default)(r,e,n)?(e=0,n=i):(e=e==null?0:(0,Qr.default)(e),n=n===void 0?i:(0,Qr.default)(n)),(0,ms.default)(r,e,n)):[]}C.slice=Zr;C.default=Zr});var tn=u(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.baseClamp=void 0;function en(r,e,n){return r===r&&(n!==void 0&&(r=r<=n?r:n),e!==void 0&&(r=r>=e?r:e)),r}Te.baseClamp=en;Te.default=en});var sn=u(be=>{"use strict";var ys=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});var _s=ys(He()),Ts=1/0,rn=Symbol.prototype.toString;function nn(r){if(typeof r=="string")return r;if(Array.isArray(r))return`${r.map(nn)}`;if((0,_s.default)(r))return rn?rn.call(r):"";let e=`${r}`;return e=="0"&&1/r==-Ts?"-0":e}be.default=nn});var an=u(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});function bs(r,e){for(var n=-1,i=r==null?0:r.length,s=Array(i);++n<i;)s[n]=e(r[n],n,r);return s}At.default=bs});var un=u(L=>{"use strict";var wt=L&&L.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Dt;Object.defineProperty(L,"__esModule",{value:!0});L.toString=void 0;var Os=wt(He()),Rs=wt(Ue()),Ps=wt(an()),on=(Dt=Symbol==null?void 0:Symbol.prototype)===null||Dt===void 0?void 0:Dt.toString,xs=1/0;function St(r){if(r==null)return"";if(typeof r=="string")return r;if((0,Rs.default)(r))return`${(0,Ps.default)(r,St)}`;if((0,Os.default)(r))return on?on.call(r):"";let e=`${r}`;return e=="0"&&1/r==-xs?"-0":e}L.toString=St;L.default=St});var Et=u(k=>{"use strict";var We=k&&k.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(k,"__esModule",{value:!0});k.startsWith=void 0;var As=We(tn()),Ds=We(sn()),ws=We(Pt()),Ss=We(un());function cn(r="",e,n=0){return r=(0,Ss.default)(r),n=n==null?0:(0,As.default)((0,ws.default)(n),0,r.length),e=(0,Ds.default)(e),r.slice(n,n+e.length)==e}k.startsWith=cn;k.default=cn});var fn=u((yo,K)=>{var Ye,ln,qt,pn,vt;ln=function(r){var e,n,i,s,a;for(a={},i=r.split(/\r?\n/),s=qt(i.shift()),a.method=s.method,a.uri=s.uri,e=[];i.length>0&&(n=i.shift(),n!=="");)e.push(n);return a.headers=Ye(e),a.body=i.join(`\r
`),a};pn=function(r){var e,n,i,s,a;for(a={},i=r.split(/\r?\n/),s=vt(i.shift()),a.protocolVersion=s.protocol,a.statusCode=s.statusCode,a.statusMessage=s.statusMessage,e=[];i.length>0&&(n=i.shift(),n!=="");)e.push(n);return a.headers=Ye(e),a.body=i.join(`\r
`),a};Ye=function(r){var e,n,i,s,a,c;for(e={},a=0,c=r.length;a<c;a++)i=r[a],s=i.split(":"),n=s.shift(),e[n]=s.join(":").trim();return e};vt=function(r){var e,n;return n=r.match(/^(.+) ([0-9]{3}) (.*)$/),e={},n!==null&&(e.protocol=n[1],e.statusCode=n[2],e.statusMessage=n[3]),e};qt=function(r){var e,n;return n=r.split(" "),e={},e.method=n[0],e.uri=n[1],e.protocol=n[2],e};K.exports.parseRequest=ln;K.exports.parseResponse=pn;K.exports.parseRequestLine=qt;K.exports.parseStatusLine=vt;K.exports.parseHeaders=Ye});var An=u(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Hash=void 0;var xn="__lodash_hash_undefined__",tt=class{constructor(e){let n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){let s=e[n];this.set(s[0],s[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){let n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){let i=this.__data__[e];return i===xn?void 0:i}has(e){return this.__data__[e]!==void 0}set(e,n){let i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n===void 0?xn:n,this}};Ae.Hash=tt;Ae.default=tt});var wn=u(De=>{"use strict";var Is=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});var Dn=Is(An());function rt({__data__:r},e){let n=r;return js(e)?n[typeof e=="string"?"string":"hash"]:n.map}function js(r){let e=typeof r;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?r!=="__proto__":r===null}var Nt=class{constructor(e){let n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){let s=e[n];this.set(s[0],s[1])}}clear(){this.size=0,this.__data__={hash:new Dn.default,map:new Map,string:new Dn.default}}delete(e){let n=rt(this,e).delete(e);return this.size-=n?1:0,n}get(e){return rt(this,e).get(e)}has(e){return rt(this,e).has(e)}set(e,n){let i=rt(this,e),s=i.size;return i.set(e,n),this.size+=i.size==s?0:1,this}};De.default=Nt});var Sn=u(Se=>{"use strict";var Fs=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});var Ns=Fs(wn()),$s="__lodash_hash_undefined__",we=class{constructor(e){let n=-1,i=e==null?0:e.length;for(this.__data__=new Ns.default;++n<i;)this.add(e[n])}add(e){return this.__data__.set(e,$s),this}has(e){return this.__data__.has(e)}};we.prototype.push=we.prototype.add;Se.default=we});var En=u($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});function Cs(r,e,n,i){let{length:s}=r,a=n+(i?1:-1);for(;i?a--:++a<s;)if(e(r[a],a,r))return a;return-1}$t.default=Cs});var qn=u(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});function Ls(r){return r!==r}Ct.default=Ls});var vn=u(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});function ks(r,e,n){let i=n-1,{length:s}=r;for(;++i<s;)if(r[i]===e)return i;return-1}Lt.default=ks});var Mn=u(Ee=>{"use strict";var kt=Ee&&Ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ee,"__esModule",{value:!0});var Us=kt(En()),Vs=kt(qn()),Bs=kt(vn());function Gs(r,e,n){return e===e?(0,Bs.default)(r,e,n):(0,Us.default)(r,Vs.default,n)}Ee.default=Gs});var In=u(qe=>{"use strict";var Hs=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});var Ws=Hs(Mn());function Ys(r,e){return!!(r==null?0:r.length)&&(0,Ws.default)(r,e,0)>-1}qe.default=Ys});var jn=u(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});function Js(r,e,n){if(r==null)return!1;for(let i of r)if(n(e,i))return!0;return!1}Ut.default=Js});var Fn=u(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});function Ks(r,e){return r.has(e)}Vt.default=Ks});var Gt=u(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});function zs(r){let e=-1,n=new Array(r.size);return r.forEach(i=>{n[++e]=i}),n}Bt.default=zs});var Nn=u(ve=>{"use strict";var Qs=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});var Zs=Qs(Gt()),Xs=1/0,ea=Set&&1/(0,Zs.default)(new Set([,-0]))[1]==Xs?r=>new Set(r):()=>{};ve.default=ea});var $n=u(Me=>{"use strict";var Z=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});var ta=Z(Sn()),ra=Z(In()),na=Z(jn()),ia=Z(Fn()),sa=Z(Nn()),aa=Z(Gt()),oa=200;function ua(r,e,n){let i=-1,s=ra.default,a=!0,{length:c}=r,l=[],f=l;if(n)a=!1,s=na.default;else if(c>=oa){let d=e?null:(0,sa.default)(r);if(d)return(0,aa.default)(d);a=!1,s=ia.default,f=new ta.default}else f=e?[]:l;e:for(;++i<c;){let d=r[i],p=e?e(d):d;if(d=n||d!==0?d:0,a&&p===p){let _=f.length;for(;_--;)if(f[_]===p)continue e;e&&f.push(p),l.push(d)}else s(f,p,n)||(f!==l&&f.push(p),l.push(d))}return l}Me.default=ua});var Ln=u(B=>{"use strict";var ca=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});B.uniq=void 0;var la=ca($n());function Cn(r){return r!=null&&r.length?(0,la.default)(r):[]}B.uniq=Cn;B.default=Cn});var Yn=u(G=>{"use strict";var Hn=G&&G.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(G,"__esModule",{value:!0});G.isPlainObject=void 0;var da=Hn(Y()),ha=Hn(J()),ga="[object Object]",ma=Function.prototype.toString.call(Object);function Wn(r){if(!(0,ha.default)(r)||(0,da.default)(r)!=ga)return!1;let e=Object.getPrototypeOf(r);if(e===null)return!0;let n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.toString.call(n)==ma}G.isPlainObject=Wn;G.default=Wn});var Kn=u(H=>{"use strict";var Jt=H&&H.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H,"__esModule",{value:!0});H.isError=void 0;var ya=Jt(Y()),_a=Jt(J()),Ta=Jt(Yn());function Jn(r){if(!(0,_a.default)(r))return!1;if(Error&&r instanceof Error||DOMException&&r instanceof DOMException)return!0;let e=(0,ya.default)(r);return e=="[object Error]"||e=="[object DOMException]"||typeof r.message=="string"&&typeof r.name=="string"&&!(0,Ta.default)(r)}H.isError=Jn;H.default=Jn});var Qn=u(W=>{"use strict";var ba=W&&W.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(W,"__esModule",{value:!0});W.attempt=void 0;var Oa=ba(Kn());function zn(r,...e){try{return r(...e)}catch(n){return(0,Oa.default)(n)?n:new Error(n)}}W.attempt=zn;W.default=zn});var ri=m(dt());var ke,Ai=new Uint8Array(16);function ht(){if(!ke&&(ke=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ke))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ke(Ai)}var h=[];for(let r=0;r<256;++r)h.push((r+256).toString(16).slice(1));function mr(r,e=0){return(h[r[e+0]]+h[r[e+1]]+h[r[e+2]]+h[r[e+3]]+"-"+h[r[e+4]]+h[r[e+5]]+"-"+h[r[e+6]]+h[r[e+7]]+"-"+h[r[e+8]]+h[r[e+9]]+"-"+h[r[e+10]]+h[r[e+11]]+h[r[e+12]]+h[r[e+13]]+h[r[e+14]]+h[r[e+15]]).toLowerCase()}var Di=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gt={randomUUID:Di};function wi(r,e,n){if(gt.randomUUID&&!e&&!r)return gt.randomUUID();r=r||{};let i=r.random||(r.rng||ht)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=i[s];return e}return mr(i)}var ce=wi;var yn=m(bt()),_n=m(wr()),Ze=m(Be()),Tn=m(Xr()),bn=m(Et()),On=m(fn());var U=class extends Error{constructor(e){super(e)}},Oe=class extends Error{constructor(e){super(e)}},T=class extends Error{constructor(e){super(e)}},g=class extends Error{constructor(e){super(e)}};function Je(r){return r<26?r+65:r<52?r+71:r<62?r-4:r===62?43:r===63?47:65}function Es(r){let e=2,n="",i=r.length,s=0;for(let a=0;a<i;a++)e=a%3,a>0&&a*4/3%76===0&&(n+=`\r
`),s|=r[a]<<(16>>>e&24),(e===2||r.length-a===1)&&(n+=String.fromCodePoint(Je(s>>>18&63),Je(s>>>12&63),Je(s>>>6&63),Je(s&63)),s=0);return n.substring(0,n.length-2+e)+(e===2?"":e===1?"=":"==")}function qs(r){let e,n,i=r.length,s=0;for(let l=0;l<i;l++)n=r.codePointAt(l),n>65536&&l++,s+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;e=new Uint8Array(s);let a=0,c=0;for(;a<s;)n=r.codePointAt(c),n<128?e[a++]=n:n<2048?(e[a++]=192+(n>>>6),e[a++]=128+(n&63)):n<65536?(e[a++]=224+(n>>>12),e[a++]=128+(n>>>6&63),e[a++]=128+(n&63)):n<2097152?(e[a++]=240+(n>>>18),e[a++]=128+(n>>>12&63),e[a++]=128+(n>>>6&63),e[a++]=128+(n&63),c++):n<67108864?(e[a++]=248+(n>>>24),e[a++]=128+(n>>>18&63),e[a++]=128+(n>>>12&63),e[a++]=128+(n>>>6&63),e[a++]=128+(n&63),c++):(e[a++]=252+(n>>>30),e[a++]=128+(n>>>24&63),e[a++]=128+(n>>>18&63),e[a++]=128+(n>>>12&63),e[a++]=128+(n>>>6&63),e[a++]=128+(n&63),c++),c++;return e}var Ke=function(r=""){return globalThis.Buffer!==void 0?globalThis.Buffer.from(r,"utf-8").toString("base64"):Es(qs(r))};function xo(r){if(r instanceof Date)return r;if(typeof r=="string"){let e=/\/Date\(([+|-]?\d+)\)\//g.exec(r);if(e!==null&&e[1]!==void 0)return new Date(parseInt(e[1]))}throw new Error("date/datetime format is not correct")}function dn(r=new Date){return`/Date(${r.getTime()})/`}function Mt(r,e){return{Authorization:`Basic ${Ke(`${r??""}:${e??""}`)}`}}var V=class r{constructor(){this._store=new Map}append(e,n){this._store.set(e,n)}putAll(e){e!==void 0&&e instanceof r&&e._store.forEach((n,i)=>{this._store.set(i,n)})}toString(){return Array.from(this._store.entries()).map(([e,n])=>`${e}=${n}`).join("&")}};function hn(r){let e="";switch(typeof r){case"object":if(r instanceof y)return`(${r.toString()})`;e=`(${Object.entries(r).map(i=>{let s=i[0],a=i[1];switch(typeof a){case"string":return`${s}='${a}'`;case"number":return`${s}=${a}`;case"boolean":return`${s}=${a}`;default:return a===null?`${s}=null`:a instanceof y?`${s}=${a.toString()}`:""}}).filter(i=>i).join(",")})`;break;case"number":e=`(${r})`;break;case"string":e=`('${r}')`;break;case"undefined":break;default:throw new T(`Not supported ObjectID type ${typeof r} for request`)}return e}var It=["c4c","byd","sap-gateway"],y=class{constructor(e){this.rawValue=e}toJSONString(){return this.toString()}},Qe=(r,e)=>e instanceof y?e.toJSONString():e,z=class r extends y{static from(e){return new r(e)}toString(){return this.rawValue}},vs=z,ze=class extends y{constructor(n,i=!0){var e=(...args)=>{super(...args)};n instanceof Date?e(n):e(new Date(n)),this._uriEncoded=i}toJSONString(){return dn(this.rawValue)}},O=class r extends ze{static from(e,n){return new r(e,n)}toString(){let e=this.rawValue.toISOString().substring(0,19);return this._uriEncoded&&(e=encodeURIComponent(e)),`datetime'${e}'`}},R=class r extends ze{static from(e,n){return new r(e,n)}toString(){let e=this.rawValue.toISOString();return this._uriEncoded&&(e=encodeURIComponent(e)),`datetimeoffset'${e}'`}},Re=class extends vs{},Pe=class r extends y{static from(e){return new r(e)}toString(){return`'${this.rawValue}'`}toJSONString(){return this.rawValue}},wo={DateTime:O,DateTimeOffset:R,RawString:z,Guid:Re,String:Pe};var Q=`\r
`,gn=(r,e)=>{let n=[];switch(n.push(`${e.method||"GET"} ${r} HTTP/1.1`),Object.entries(e.headers).forEach(([i,s])=>{n.push(`${i}: ${s}`)}),typeof e.body){case"string":n.push(Q),n.push(e.body);break;case"object":n.push(Q),n.push(JSON.stringify(e.body,Qe));break;case"undefined":n.push("");default:break}return n.join(Q)},Rn=(r=[])=>{let e={requests:[]};return r.forEach((n,i)=>{var a,c,l,f,d,p,_,w;let s={id:((a=n.options)==null?void 0:a.requestId)??i.toString(),method:(l=(c=n.init)==null?void 0:c.method)==null?void 0:l.toLocaleLowerCase(),url:n.url};(f=n.init)!=null&&f.headers&&(s.headers=(d=n.init)==null?void 0:d.headers),(p=n.init)!=null&&p.body&&(s.body=n.init.body),(_=n.options)!=null&&_.atomicityGroup&&(s.atomicityGroup=n.options.atomicityGroup),(w=n.options)!=null&&w.dependsOn&&(s.dependsOn=n.options.dependsOn),e.requests.push(s)}),e},Pn=(r,e)=>(0,Ze.default)((0,yn.default)(r.map(n=>{if(n.init.method==="GET"||!n.init.method)return(0,Ze.default)([`--${e}`,"Content-Type: application/http","Content-Transfer-Encoding: binary","",gn(n.url,n.init),""],Q);let i=ce();return(0,Ze.default)([`--${e}`,`Content-Type: multipart/mixed; boundary=${i}`,"",`--${i}`,"Content-Type: application/http","Content-Transfer-Encoding: binary","",gn(n.url,n.init),"",`--${i}--`],Q)}),`--${e}--`),Q),mn=async r=>{let e=(0,On.parseResponse)(r);return{json:async()=>JSON.parse(e.body),text:async()=>e.body,headers:e.headers,status:parseInt(e.statusCode,10),statusText:e.statusMessage}},jt=async(r,e)=>{if(r&&e){let n=r.split(`--${e}`),i=(0,Tn.default)(n,1,n.length-1);return(0,_n.default)(await Promise.all(i.map(async s=>{let a=await mn(s),c=a.headers["Content-Type"];if((0,bn.default)(c,"multipart/mixed")){let l=c.split("=").pop();return jt(await a.text(),l)}else if(c==="application/http")return mn(await a.text())})))}throw new T("parameter lost")};var Xe=m(Be());var Ms=(c=>(c.eq="eq",c.ne="ne",c.gt="gt",c.lt="lt",c.ge="ge",c.le="le",c))(Ms||{}),Ft=class{constructor(e,n,i){this._exprMappings=i,this._fieldName=n,this._filter=e,this._getFieldExprs()==null&&(this._exprMappings[this._fieldName]=[])}_getFieldExprs(){return this._exprMappings[this._fieldName]}_addExpr(e,n){var i;switch(typeof n){case"number":case"boolean":this._getFieldExprs().push({op:e,value:`${n}`});break;case"string":n.startsWith("'")||n.startsWith("datetime")?this._getFieldExprs().push({op:e,value:n}):this._getFieldExprs().push({op:e,value:`'${n}'`});break;case"object":if(n instanceof y)this._getFieldExprs().push({op:e,value:n.toString()});else if(n===null)this._getFieldExprs().push({op:e,value:null});else throw new T(`Not support object ${((i=n==null?void 0:n.constructor)==null?void 0:i.name)||typeof n} in odata filter eq/ne/gt/ge/ne/nt ...`);break;case"undefined":throw new g("You must set value in odata filter eq/ne/gt/ge/ne/nt ...");default:throw new T(`Not support typeof ${typeof n}: ${n} in odata filter eq/ne/gt/ge/ne/nt ...`)}}eq(e){return this._addExpr("eq",e),this._filter}ne(e){return this._addExpr("ne",e),this._filter}eqString(e){return this._addExpr("eq",`'${e}'`),this._filter}neString(e){return this._addExpr("ne",`'${e}'`),this._filter}ge(e){return this._addExpr("ge",e),this._filter}gt(e){return this._addExpr("gt",e),this._filter}le(e){return this._addExpr("le",e),this._filter}lt(e){return this._addExpr("lt",e),this._filter}in(e=[]){return e.length>0&&e.forEach(n=>{this.eq(n)}),this._filter}between(e,n,i=!0){if(e==null||n==null)throw new g("You must give out the start and end value");return i?(this.ge(e),this.le(n)):(this.gt(e),this.lt(n)),this._filter}betweenDateTime(e,n,i=!0){if(e==null&&n==null)throw new g("You must give out the start or end date");return e instanceof Date&&(i?this.ge(O.from(e)):this.gt(O.from(e))),n instanceof Date&&(i?this.le(O.from(n)):this.lt(O.from(n))),this._filter}betweenDateTimeOffset(e,n,i=!0){if(e==null&&n==null)throw new g("You must give out the start or end date");return e instanceof Date&&(i?this.ge(R.from(e)):this.gt(R.from(e))),n instanceof Date&&(i?this.le(R.from(n)):this.lt(R.from(n))),this._filter}},b=class r{constructor(){this._fieldExprMappings={}}static newBuilder(){return new r}static newFilter(){return new r}getExprMapping(){return this._fieldExprMappings}field(e){return this.property(e)}property(e){return new Ft(this,e,this.getExprMapping())}fieldIn(e,n){return this.fieldValueMatchArray(e,n)}fieldValueMatchArray(e,n=[]){return n&&n.forEach(i=>{this.field(e).eqString(i)}),this}inPeriod(e,n,i){return this.betweenDateTime(e,n,i)}betweenDateTime(e,n,i){if(n&&i)return this.gtDateTime(e,n).ltDateTime(e,i);throw new g("You must give out the start and end date")}betweenDateTimeOffset(e,n,i){if(n&&i)return this.gtDateTimeOffset(e,n).ltDateTimeOffset(e,i);throw new g("You must give out the start and end date")}gtDateTime(e,n){return this.field(e).gt(O.from(n))}gtDateTimeOffset(e,n){return this.field(e).gt(R.from(n))}ltDateTime(e,n){return this.field(e).lt(O.from(n))}ltDateTimeOffset(e,n){return this.field(e).lt(R.from(n))}group(e){return this._fieldExprMappings=Object.assign(this._fieldExprMappings,e.getExprMapping()),this}toString(){return this.build()}_buildFieldExprString(e){let n=this.getExprMapping()[e];return n.length>0?n.filter(i=>i.op=="eq").length==0?`(${(0,Xe.join)(n.map(({op:i,value:s})=>`${e} ${i} ${s}`)," and ")})`:`(${(0,Xe.join)(n.map(({op:i,value:s})=>`${e} ${i} ${s}`)," or ")})`:""}build(){let e="";return e=(0,Xe.join)(Object.entries(this.getExprMapping()).map(([n,i])=>{switch(i.length){case 0:return"";case 1:let{op:s,value:a}=i[0];return`${n} ${s} ${a}`;default:return this._buildFieldExprString(n)}})," and "),e}},xe,et=class extends b{constructor(n){super();Fe(this,xe,void 0);Ne(this,xe,n)}filterEnd(){return ee(this,xe).filter(this)}};xe=new WeakMap;function $o(){return b.newFilter()}var Ht=m(bt()),nt=m(Ue()),Wt=m(Be()),kn=m(Ln());var A=class r{static newTransformation(){return new r}constructor(){}aggregate(e){return this._aggregate=e,this}topcount(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"top",type:"count"},this}topsum(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"top",type:"sum"},this}toppercent(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"top",type:"percent"},this}bottomcount(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"bottom",type:"count"},this}bottomsum(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"bottom",type:"sum"},this}bottompercent(e,n){return this._countSumPercent={count:e,valueExpression:n,direction:"bottom",type:"percent"},this}identity(){return this._identity=!0,this}concat(...e){return this._concat=e,this}filter(e){return this._filter=e,this}groupBy(e,...n){return this._groupBy={properties:e,transformations:n},this}toString(){let e="";if(this._aggregate!==void 0)return`aggregate(${this._aggregate})`;if(this._countSumPercent!==void 0){let{direction:n,type:i,count:s,valueExpression:a}=this._countSumPercent;return`${n}${i}(${s},${a})`}if(this._groupBy!==void 0){let n=`(${this._groupBy.properties.join(",")})`;if(this._groupBy.transformations.length>0){let i=this._groupBy.transformations.map(s=>s.toString()).join("/");return`groupBy(${n},${i})`}return`groupBy(${n})`}return this._identity===!0?"identity":this._filter!==void 0?`filter(${this._filter.toString()})`:e}};function pa(){return A.newTransformation()}var X,it=class it{constructor(){this.$select=[];this.$expand=[];this.$count=!1;Fe(this,X,void 0);Ne(this,X,new V)}static newParam(){return new it}static newOptions(){return new it}inlinecount(e=!1){return e?this.$inlinecount="allpages":delete this.$inlinecount,this}count(e=!0){return this.$count=e,this}filter(e){if(e===void 0)return new et(this);if(e instanceof b)return this.$filter=e.build(),this;if(typeof e=="string")return this.$filter=e,this;throw new g("ODataQueryParam.filter only accept string or ODataFilter type parameter")}skip(e){return this.$skip=e,this}top(e){return this.$top=e,this}select(e){return this.$select=(0,Ht.default)(this.$select,e),this}orderby(e,n="desc"){return(0,nt.default)(e)?this.orderbyMulti(e):(this.$orderby=`${String(e)} ${n}`,this)}orderbyMulti(e=[]){return this.$orderby=(0,Wt.default)(e.map(n=>`${String(n.field)} ${n.order||"desc"}`),","),this}format(e){if(e==="json")this.$format=e;else throw new g("light-odata doesnt support xml response");return this}search(e,n=!0){return this.$search=n?`%${e}%`:e,this}apply(e){return(0,nt.default)(e)?this.$apply=e.map(n=>n instanceof A?n.toString():String(n)).join("/"):e instanceof A?this.$apply=e.toString():this.$apply=e,this}expand(e,n=!1){return n?typeof e=="string"?this.$expand=[e]:(0,nt.default)(e)&&(this.$expand=e):this.$expand=(0,Ht.default)(this.$expand,e),this}custom(e,n){return ee(this,X).append(e,n),this}toString(e="v2",n="default"){let i=new V;switch(i.putAll(ee(this,X)),this.$format&&i.append("$format",this.$format),this.$filter&&i.append("$filter",this.$filter.toString()),this.$orderby&&i.append("$orderby",this.$orderby),this.$select&&this.$select.length>0&&i.append("$select",(0,Wt.default)((0,kn.default)(this.$select),",")),this.$skip&&i.append("$skip",this.$skip.toString()),this.$top&&this.$top>0&&i.append("$top",this.$top.toString()),this.$expand&&this.$expand.length>0&&i.append("$expand",this.$expand.join(",")),e){case"v2":this.$inlinecount&&i.append("$inlinecount",this.$inlinecount);break;case"v4":this.$count&&i.append("$count","true"),this.$apply&&i.append("$apply",this.$apply);break;default:break}if(this.$search)switch(n){case"sap-gateway":i.append("search",this.$search);break;default:i.append("$search",this.$search);break}return i.toString()}};X=new WeakMap;var Ie=it,st=Ie,su=Ie;function au(){return st.newParam()}function Un(){return Ie.newOptions()}var at=class{constructor(e,n){this._entitySet=e,this._client=n}_checkError(e){var n,i,s;if(e.error)switch(this._client.getVersion()){case"v2":throw new U((i=(n=e.error)==null?void 0:n.message)==null?void 0:i.value);case"v4":throw new U((s=e.error)==null?void 0:s.message);default:break}}_getResultSingle(e){switch(this._client.getVersion()){case"v2":return e.d;case"v4":return e;default:break}}_getResults(e){var n;switch(this._client.getVersion()){case"v2":return(n=e.d)==null?void 0:n.results;case"v4":return e==null?void 0:e.value;default:break}}newFilter(){return this._client.newFilter()}newParam(){return this._client.newParam()}newOptions(){return this._client.newOptions()}async retrieve(e,n){let i=await this._client.newRequest({collection:this._entitySet,method:"GET",id:e,params:n});return this._checkError(i),this._getResultSingle(i)}async find(e){let n=P.newFilter();return Object.entries(e).forEach(([i,s])=>{typeof s=="string"?n.field(i).eqString(s):n.field(i).eq(s)}),this.query(P.newParam().filter(n))}async query(e){e instanceof b&&(e=Un().filter(e)),e==null&&(e=P.newParam());let n=await this._client.newRequest({collection:this._entitySet,method:"GET",params:e});return this._checkError(n),this._getResults(n)}async count(e){var s;let n=P.newParam().top(1);switch(this._client.getVersion()){case"v4":n.count(!0);break;case"v2":n.inlinecount(!0);break}if(typeof e=="object")if(e instanceof b)n.filter(e);else{let a=this.newFilter();for(let[c,l]of Object.entries(e))a.field(c).eq(l);n.filter(a)}let i=await this._client.newRequest({collection:this._entitySet,method:"GET",params:n});switch(this._checkError(i),this._client.getVersion()){case"v2":return parseInt((s=i==null?void 0:i.d)==null?void 0:s.__count);case"v4":return i["@odata.count"]}}async create(e){let n=await this._client.newRequest({collection:this._entitySet,method:"POST",entity:e});return this._checkError(n),this._getResultSingle(n)}async update(e,n){let i=await this._client.newRequest({collection:this._entitySet,method:"PATCH",id:e,entity:n});this._checkError(i)}async delete(e){let n=await this._client.newRequest({collection:this._entitySet,method:"DELETE",id:e});this._checkError(n)}async action(e,n,i){let s=await this._client.newRequest({collection:this._entitySet,method:"POST",id:n,parameters:i,actionName:e});return this._checkError(s),s}async function(e,n,i,s){let a=await this._client.newRequest({collection:this._entitySet,method:"GET",id:n,params:s,parameters:i,functionName:e});return this._checkError(a),a}};var Gn=m(dt());var Yt="Authorization",Vn="Bearer",fa="client_credentials",Bn="application/x-www-form-urlencoded",ot=class{constructor(e,n,i,s="header",a){this.mut=new Gn.Mutex;this.expiresAt=0;this.tokenRetrieveType="header";this.tokenUrl=e,this.clientId=n,this.clientSecret=i,this.tokenRetrieveType=s,this.scope=a}async fetchOAuthResponse(){var i,s;let e=new V;e.append("grant_type",fa),typeof this.scope=="string"&&e.append("scope",this.scope);let n;if(this.tokenRetrieveType==="form"?(e.append("client_id",this.clientId),e.append("client_secret",this.clientSecret),n=await fetch(this.tokenUrl,{method:"POST",body:e.toString(),headers:{"Content-Type":Bn}})):n=await fetch(this.tokenUrl,{method:"POST",body:e.toString(),headers:{[Yt]:"Basic "+Ke(`${this.clientId}:${this.clientSecret}`),"Content-Type":Bn}}),n.status>=400)if((s=(i=n.headers.get("Content-Type"))==null?void 0:i.includes)!=null&&s.call(i,"application/json")){let a=await n.json();throw"error"in a?new Oe(a.error):new Oe(JSON.stringify(a))}else throw new Error(await n.text());return n.json()}async getHeader(){let e=await this.getToken();return{[Yt]:`${Vn} ${e}`}}async getToken(){return this.mut.use(async()=>{var e;try{let n=new Date().getTime();if(n>=this.expiresAt){let{access_token:i,expires_in:s}=await this.fetchOAuthResponse();this.token=i,this.expiresAt=n+s/2*1e3}}catch(n){throw(e=console==null?void 0:console.error)==null||e.call(console,`oauth client retrieve token failed: ${(n==null?void 0:n.message)??n}`),n}return this.token})}async fetch(...e){let n=await this.getToken();if(n===void 0)throw new TypeError("un-expected token is undefined");let i=e[0],s=e[1];return s===void 0&&(s={}),s.headers={...s.headers||{},[Yt]:`${Vn} ${n}`},fetch(i,s)}};var Zn=m(Qn()),Xn=m(Et()),Kt="x-csrf-token",je="Content-Type",ei=async(r,e)=>{var s,a;let n=await fetch(r,e),i=await n.text();if((s=n.headers)!=null&&s.has(je)&&(0,Xn.startsWith)((a=n.headers)==null?void 0:a.get(je),"application/json")){let c=(0,Zn.attempt)(JSON.parse,i);c instanceof Error||(i=c)}return{content:i,response:n}},ti={Accept:"application/json",[je]:"application/json"};var P=class r{constructor(e,n,i={},s,a=!1){this.csrfToken="";this.commonHeader=ti;this.fetchProxy=ei;this.processCsrfToken=!1;this.csrfTokenName=Kt;this.variant="default";this.version="v2";this.lock=new ri.Mutex;if(s&&(this.fetchProxy=s),e===void 0)throw new g("metadata url required !");e.endsWith("$metadata")&&(e=e.slice(0,e.length-9)),this.serviceEndpoint=e,n!==void 0&&(this.credential=n,n.tokenUrl!==void 0&&n.clientId!==void 0&&n.clientSecret!==void 0&&(this.oauthClient=new ot(n.tokenUrl,n.clientId,n.clientSecret,n.tokenRetrieveType,n.scope))),this.commonHeader={...this.commonHeader,...i},this.processCsrfToken=a}static New(e){let n=new r(e.serviceEndpoint??e.metadataUri,e.credential,e.commonHeaders,e.fetchProxy,e.processCsrfToken);return n.version=e.version??"v2",n.variant=e.variant??"default",It.includes(n.variant)&&(n.processCsrfToken=!0,n.commonHeader["odata-v2-strict-json-format"]="true"),n.csrfTokenName=e.csrfTokenName??Kt,n}static New4(e){return e.version="v4",r.New(e)}static newParam(){return st.newParam()}static newOptions(){return st.newOptions()}static newFilter(){return b.newFilter()}static newTransformation(){return A.newTransformation()}async getHeaders(){let e={...this.commonHeader};return this.credential&&(this.credential.username!==void 0?e={...e,...Mt(this.credential.username,this.credential.password)}:this.oauthClient&&(e={...e,...await this.oauthClient.getHeader()})),this.processCsrfToken&&(e[this.csrfTokenName]=await this.getCsrfToken()),e}getEntitySet(e){return new at(e,this)}setCredential(e){this.credential=e}setODataEndPath(e){e!==void 0&&(this.serviceEndpoint=e,this.serviceEndpoint.endsWith("/")||(this.serviceEndpoint+="/"))}getVersion(){return this.version}async getCsrfToken(e=!0){return this.lock.use(async()=>{var s;if(e&&this.csrfToken!==void 0&&this.csrfToken!==null&&((s=this.csrfToken)==null?void 0:s.length)>0)return this.csrfToken;let n={method:"GET",headers:{[this.csrfTokenName]:"fetch"}};this.credential&&(n.headers={...n.headers,...Mt(this.credential.username,this.credential.password)});let{response:{headers:i}}=await this.fetchProxy(this.serviceEndpoint,n);if(i)this.csrfToken=i.get(this.csrfTokenName);else throw new T("csrf token need the odata proxy give out headers!");return this.csrfToken})}cleanCsrfToken(){this.csrfToken&&delete this.csrfToken}async requestUri(e,n,i="GET",s){var d,p,_,w;let a=e,c={method:i,headers:await this.getHeaders()};i!=="GET"&&s&&(typeof s!="string"?c.body=JSON.stringify(s,Qe):c.body=s);let l=await this.fetchProxy(a,c);this.processCsrfToken===!0&&((w=(_=(p=(d=l==null?void 0:l.response)==null?void 0:d.headers)==null?void 0:p.get)==null?void 0:_.call(p,this.csrfTokenName))==null?void 0:w.toUpperCase())==="Required".toUpperCase()&&(c.headers[this.csrfTokenName]=await this.getCsrfToken(!1),l=await this.fetchProxy(a,c));let{content:f}=l;return f}async _executeDataOperation(e,n,i,s="GET",a){var f;let c=`${this.serviceEndpoint}${e}`;n&&(c+=this.formatIdString(n));let l=(f=i==null?void 0:i.toString)==null?void 0:f.call(i,this.version);return l!==void 0&&l.length>0&&(c=`${c}?${l}`),this.requestUri(c,i,s,a)}async actionImport(e,n,i=this.newParam()){return this.newRequest({method:"POST",params:i,parameters:n,actionName:e})}async functionImport(e,n,i=this.newParam()){return await this.newRequest({parameters:n,params:i,method:"GET",functionName:e})}formatIdString(e){return hn(e)}async newRequest(e){return e.actionName||e.functionName?this._executeActionOrFunction(e):this._executeDataOperation(e.collection,e.id,e.params,e.method,e.entity)}async _executeActionOrFunction(e){var p,_;let n=`${this.serviceEndpoint}`,i="GET";e.params=e.params??this.newParam();let s=e.collection!==void 0&&e.id!==void 0,a=e.actionName,c=e.functionName,l=typeof a=="string",f=typeof c=="string";if(l&&f)throw new g("'actionName' and 'functionName' can not be fillled in same time.");if(!l&&!f)throw new g("must provide 'actionName' or 'functionName'.");if(s&&(n+=`${e.collection}`,n+=this.formatIdString(e.id)),n.endsWith("/")||(n+="/"),f)switch(n+=`${c}`,i="GET",this.version){case"v2":e.parameters!==void 0&&(e.params=e.params??this.newParam(),Object.entries(e.parameters).forEach(([w,ni])=>{e.params.custom(w,ni)}));break;case"v4":e.parameters!==void 0?n+=this.formatIdString(e.parameters):n+="()";break;default:break}l&&(n+=`${a}`,i="POST");let d=(_=(p=e==null?void 0:e.params)==null?void 0:p.toString)==null?void 0:_.call(p,this.version);if(d!==void 0&&d.length>0&&(n+=`?${d}`),l)return this.requestUri(n,void 0,i,e.parameters??{});if(f)return this.requestUri(n,void 0,i)}async formatBatchRequests(e){let n=`${this.serviceEndpoint}$batch`,i={method:"POST",headers:await this.getHeaders()},s=await Promise.all(e.map(async c=>await c)),a=ce();return i.headers["Content-Type"]=`multipart/mixed; boundary=${a}`,i.body=Pn(s,a),{url:n,req:i}}async execBatchRequests(e){let{url:n,req:i}=await this.formatBatchRequests(e),{content:s,response:{headers:a}}=await this.fetchProxy(n,i),c=a.get("Content-Type").split("=").pop();return c.length==0,await jt(s,c)}async execBatchRequestsJson(e){var d;let n=await Promise.all(e),i=Rn(n),s=`${this.serviceEndpoint}$batch`,a=await this.getHeaders(),l=(await this.fetchProxy(s,{method:"POST",body:JSON.stringify(i),headers:a})).content;if(l.error)throw new U(l.error.message||"Unknown server error");let f=[];return(d=l.responses)==null||d.forEach(p=>{f.push({json:async()=>p.body,text:async()=>JSON.stringify(p.body),headers:p.headers,status:p.status,statusText:void 0,raw:p})}),f}newFilter(){return r.newFilter()}newParam(){return r.newParam()}newOptions(){return r.newOptions()}newTransformation(){return A.newTransformation()}async newBatchRequest(e){let{withContentLength:n=!1}=e,{collection:i,method:s="GET",id:a,params:c,entity:l}=e;It.includes(this.variant)&&(n=!0);let f=i,d=Object.assign({},this.commonHeader),p={url:f,init:{method:s,headers:d,body:""}};return a&&(f+=this.formatIdString(a)),s==="GET"||s==="DELETE"?(delete d[je],c&&(f=`${f}?${c.toString(this.version)}`)):(p.init.body=l,n&&(p.init.headers["Content-Length"]=encodeURI(p.init.body.toString()).length)),p.init.headers=d,p.url=f,p.options=e,p}};var ut=class extends y{constructor(e){e instanceof Date?super(e):super(new Date(e))}},zt=class r extends ut{static from(e){return new r(e)}toString(){return this.rawValue.toISOString()}},Qt=class r extends ut{static from(e){return new r(e)}toString(){return this.rawValue.toISOString().split("T")[0]}},Ra={RawString:z,DateTimeOffset:zt,Date:Qt,Guid:Re,String:Pe};var Vu=P;})();
